@{
    Layout = null;
}




<html>
<head>
    <title>jqGrid</title>
    <script src="~/Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
    <link href="~/Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link href="~/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/jquery-ui-1.8.24.min.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="~/Scripts/i18n/grid.locale-ru.js" type="text/javascript"></script>
    <style>
                         .ui-jqgrid .ui-pg-input {
                    height: 20px;
                }
     
        #Button1 {
            width: 109px;
        }
     
        #date1 {
            width: 236px;
        }
        #date2 {
            width: 305px;
            margin-left: 122px;
        }
     
    </style>
</head>
<body>




    <input id="date1" type="date" value="date1" /><input id="date2" type="date" value="date2" /><br /><br />
    <br /><br />


    <label for="Regions">Regions</label>
    <select id="Regions" name="Regions"></select>
    
    <label for="Cities">Cities</label>
    <select id="Cities" name="Cities"></select>
    <br />
    <br />
    <input type="submit" value="Submit">
  
    <script type="text/javascript">
        $(function (){
            $.getJSON("/Home/Regions/List", function (data) {
                var items = "<option>----------------------</option>";
                $.each(data, function (i, reg) {
                    items+="<option value='"+reg.Value +"'>"+reg.Text + "</option>";
                });
                $("#Regions").html(items);
            });

             $("#Regions").change(function () {
                $.getJSON("/Home/Cities/List/" + $("#Regions > option:selected").attr("value"), function (data) {
                    var items = "<option>----------------------</option>";
                    $.each(data, function (i, sta) {
                        items += "<option value='" + sta.Value + "'>" + sta.Text + "</option>";
                    });
                    $("#Cities").html(items);
                });
            });
        });
    </script>




    <h2>jQGrid</h2>
    <table id="jqg"></table>
    <div id="jpager"></div>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#jqg").jqGrid({
                url: '@Url.Action("GetData")',
                datatype: "json",
                colNames: ['Id', 'Название', 'Автор', 'Год', 'Цена'],
                colModel: [
                { name: 'Id', index: 'Id', width: 30, stype: 'text' },
                { name: 'name', index: 'name', width: 150, sortable: true },
                { name: 'Author', index: 'Author', width: 150, sortable: true },
                { name: 'Year', index: 'Year', width: 100, sortable: false },
                { name: 'Price', index: 'Price', width: 80, align: "right", sortable: true }
                ],
                rowNum: 5, // число отображаемых строк
                rowList: [10, 20, 30],
                pager: '#jpager',
                loadonce: true, // загрузка только один раз
                sortname: 'Id', // сортировка по умолчанию по столбцу Id
                sortorder: "desc", // порядок сортировки
                caption: "Список Книг"
            });
        });
    </script>

       
</body>
</html>